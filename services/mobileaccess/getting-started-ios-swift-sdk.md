---

copyright:
  years: 2016
lastupdated: "2016-11-02"

---
{:shortdesc: .shortdesc}
{:screen: .screen}

# Setting up the iOS Swift SDK
{: #getting-started-ios}

{{site.data.keyword.amafull}} has released a new Swift SDK, that adds to, and improves, the functionality provided by the existing {{site.data.keyword.amashort}} Objective-C SDK, making it easier to authenticate your app and providing better protection for your back-end resources. Instrument your iOS Swift application with the {{site.data.keyword.amashort}} SDK, initialize the SDK, and make requests to protected and unprotected resources.

{:shortdesc}

While the Objective-C SDK remains fully supported, and is still considered the primary SDK for  {{site.data.keyword.Bluemix_notm}} Mobile Services, there are plans to discontinue the Objective-C SDK later this year in favor of this new Swift SDK.


## Before you begin
{: #before-you-begin}
You must have:
* An instance of a {{site.data.keyword.Bluemix_notm}} application.
* An instance of a {{site.data.keyword.amafull}} service.
* Your **TenantID**. Open your service in the {{site.data.keyword.Bluemix_notm}} dashboard. Click **Mobile Options**. The `tenantId` (also known as `appGUID`)  values are displayed in the  **App GUID / TenantId** field. You will need this value for intializing the {{site.data.keyword.amashort}} Authorization Manager.
* Your **Application Route**. This is the URL of your back-end application. You need this value for for sending requests to its protected endpoints.
* Your {{site.data.keyword.Bluemix_notm}} **Region**.  You can find your current {{site.data.keyword.Bluemix_notm}} region in the header, next to the **Avatar** icon ![Avatar icon](images/face.jpg "Avatar icon"). The region value that appears should be one of the following: `US South`,  `Sydney`, or  `United Kingdom`, and correspond to the SDK values required in the code: `BMSClient.Region.usSouth`, `BMSClient.Region.unitedKingdom`, or `BMSClient.Region.sydney`.  You will need this value for intializing the {{site.data.keyword.amashort}}  SDK.
* An Xcode project. For more information about how to set up your iOS development environment, see the [Apple Developer website](https://developer.apple.com/support/xcode/).


## Installing the {{site.data.keyword.amashort}} client SDK
{: #install-mca-sdk-ios}
The {{site.data.keyword.amashort}} SDK is distributed with CocoaPods, a dependency manager for iOS projects. CocoaPods automatically downloads artifacts from repositories, and makes them available to your iOS application.


### Install CocoaPods
{: #install-cocoapods}

1. In a terminal window,  run the **pod --version** command. If you already have CocoaPods installed, the version number displays and you can skip to the next section to install the SDK.

1. If you do not have CocoaPods installed, run:

```
sudo gem install cocoapods
```

For more information, see the [CocoaPods website](https://cocoapods.org/).

### Install the {{site.data.keyword.amashort}} client SDK with CocoaPods
{: #install-sdk-cocoapods}

1. In a terminal window, navigate to the root directory of your iOS project.

1. If you have not already initialized your workspace for CocoaPods, run the `pod init` command.<br/>
 CocoaPods creates a `Podfile` file for you, which is where you define dependencies for your iOS project.

1. Edit the `Podfile` file and add the following line to the required targets:

	```
  use_frameworks!
  pod 'BMSSecurity'
	```

  **Tip:** You can add `use_frameworks!` to your Xcode target instead of having it in the Podfile.

1. Save the `Podfile` file, and run `pod install` from the command line. CocoaPods  installs the relevant dependencies, and displays the added dependencies and pods.<br/>

   **Important**: CocoaPods generates an `xcworkspace` file.  You must open this file to work on your project going forward.

1. Open your iOS project workspace. Open the `xcworkspace` file that was generated by CocoaPods. For example, for `{your-project-name}.xcworkspace`, run

	`open {your-project-name}.xcworkspace`

### Enable Keychain Sharing for iOS
{: #enable_keychain}

Enable `Keychain Sharing`. Go to the `Capabilities` tab and switch the `Keychain Sharing` to `On` in your Xcode project.

## Initializing the {{site.data.keyword.amashort}} client SDK
{: #init-mca-sdk-ios}

 Initialize the SDK by passing the `applicationGUID` parameter. A common, though not mandatory, place to put the initialization code is in the `application:didFinishLaunchingWithOptions` method of your application delegate.

1. Import the required frameworks in the class where you want to use {{site.data.keyword.amashort}} client SDK.

 ```Swift
 import BMSCore
 import BMSSecurity
 ```

1. Initialize the {{site.data.keyword.amashort}} client SDK.

```Swift
	let tenantId = "<serviceTenantID>"
	let regionName = <applicationBluemixRegion>

	func application(_ application: UIApplication,
	    didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {

	let mcaAuthManager = MCAAuthorizationManager.sharedInstance
    mcaAuthManager.initialize(tenantId: tenantId, bluemixRegion: regionName)
      // possible values for regionName: BMSClient.Region.usSouth, BMSClient.Region.unitedKingdom, BMSClient.Region.sydney
	BMSClient.sharedInstance.authorizationManager = mcaAuthManager
	return true
	}
 ```

* Replace the `tenantId` with value you obtained from **Mobile options**. 
* Replace `<applicationBluemixRegion>` with the region where your {{site.data.keyword.Bluemix_notm}} application is hosted. 

For information about these values, see [Before you begin](#before-you-begin). 


## Making a request to your mobile back-end application
{: #request}

After the {{site.data.keyword.amashort}} client SDK is initialized, you can start making requests to your mobile back-end application.

1. Try to send a request to a protected endpoint on your mobile back-end application in your browser. Open the following URL: `{applicationRoute}/protected` replacing the `{applicationRoute}` with the **applicationRoute** value you retrieved from the **Mobile options** (see [Initializing the Mobile Client Access client SDK](#init-mca-sdk-ios)). For example:

	`http://my-mobile-backend.mybluemix.net/protected`

	An `Unauthorized` message is returned in your browser because this endpoint can be accessed by mobile applications that are instrumented with {{site.data.keyword.amashort}} client SDK only.

1. Use your iOS application to make a request to the same endpoint. Add the following code after you initialize `BMSClient`:

 ```Swift
	let customResourceURL = "<your protected resource absolute path>"
	let request = Request(url: customResourceURL, method: HttpMethod.GET)

	let callBack:BMSCompletionHandler = {(response: Response?, error: Error?) in
   	if error == nil {
       	    print ("response:\(response?.responseText), no error")
    	  } else {
       	    print ("error: \(error)")
    	}
	}
	request.send(completionHandler: callBack)
 ```
 {: codeblock}

1.  When your request succeeds, the following output appears in the Xcode console:

 ```
 response:Optional("Hello, this is a protected resource of the mobile backend application!"), no error
 ```
{: screen}

## Next steps
{: #next-steps}
When you connected to the protected endpoint, no credentials were required. To require your users to log in to your application, you must configure Facebook, Google, or custom authentication.
  * [Facebook](facebook-auth-ios-swift-sdk.html)
  * [Google](google-auth-ios-swift-sdk.html)
  * [Custom](custom-auth-ios-swift-sdk.html)
